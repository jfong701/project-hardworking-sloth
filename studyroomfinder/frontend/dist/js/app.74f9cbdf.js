(function(e){function t(t){for(var n,i,o=t[0],u=t[1],c=t[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var u=a[o];0!==r[u]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("8a23"),r=a.n(n);r.a},"0434":function(e,t,a){"use strict";var n=a("7443"),r=a.n(n);t["default"]=r.a},2822:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("head",[a("meta",{attrs:{charset:"utf-8"}}),a("title",[e._v("Study Room Finder - Credits")])]),a("body",[a("header",[a("a",{attrs:{href:"/",id:"title"}},[e._v("Study Room Finder")])]),a("h1",[e._v("Credits")]),a("h2",[e._v("HTML & JavaScript code")]),a("ul",[a("li",[e._v("Developed using source code from "),a("a",{attrs:{href:"https://github.com/ThierrySans/CSCC09"}},[e._v("CSCC09 Github")])])]),a("h2",[e._v("For map")]),a("ul",[a("li",[e._v("Developed using source code from "),a("a",{attrs:{href:"http://jsfiddle.net/Boumi/k04zpLx9"}},[e._v("Map")])])]),a("h2",[e._v("For the login and sign up pages UI elements such as the form and buttons")]),a("ul",[a("li",[e._v("Developed using source code from "),a("a",{attrs:{href:"https://vuetifyjs.com/en/components/parallax/"}},[e._v("Vuetify")])])]),a("h2",[e._v("For the sidebar in the home page and the toggle function")]),a("ul",[a("li",[e._v("Developed using source code from "),a("a",{attrs:{href:"https://ej2.syncfusion.com/vue/documentation/sidebar/getting-started/"}},[e._v("Syncfusion")])])])])])}]},"3ce1":function(e,t,a){"use strict";var n=a("b642"),r=a.n(n);r.a},"4b8c":function(e,t,a){"use strict";var n=a("560f"),r=a.n(n);r.a},"560f":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}}),a("router-view")],1)},s=[],i=(a("ac1f"),a("5319"),{name:"App",data:function(){return{}},mounted:function(){this.$router.replace({name:"Login"})}}),o=i,u=(a("034f"),a("2877")),c=Object(u["a"])(o,r,s,!1,null,null,null),l=c.exports,p=a("f309");n["a"].use(p["a"]);var d=new p["a"]({}),f=a("8c4f"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{attrs:{color:"blue"}},[a("v-app-bar-nav-icon"),a("v-toolbar-title",[e._v("Login")]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("router-link",{attrs:{to:"/SignUp",replace:""}},[e._v("Sign up")])],1)],1),a("v-parallax",{attrs:{dark:"",src:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg"}},[a("form",[a("v-text-field",{attrs:{input:"",type:"text",name:"username",placeholder:"Username"},model:{value:e.input.username,callback:function(t){e.$set(e.input,"username",t)},expression:"input.username"}}),a("v-text-field",{attrs:{input:"",type:"password",name:"password",placeholder:"Password"},model:{value:e.input.password,callback:function(t){e.$set(e.input,"password",t)},expression:"input.password"}}),a("v-btn",{attrs:{type:"button"},on:{click:function(t){return e.login()}}},[e._v("Login")])],1)]),a("footer",[a("router-link",{attrs:{to:"/Credits",replace:""}},[a("v-list-item-title",[e._v("Credits")])],1)],1)],1)},m=[],h=a("bc3a"),g=a.n(h),b="https://studyroomfinder.me/",_=function(){return g.a.create({baseURL:b,withCredentials:!0})},y=(a("1276"),a("2ca0"),a("498a"),a("2f6e")),S={initialize:function(){var e="prj_test_pk_18eeb5f920e2f5feb64423dbb299211811bc45a0";y["a"].initialize(e)},setRadarUser:function(e){y["a"].setUserId(e)},trackOnce:function(){var e=[];return y["a"].trackOnce((function(t,a,n,r){console.log("Radar: ",t,a,n,r),e.push(t,a,n,r)})),e},getUsers:function(e){return _().get("/api/displayUsers/").then((function(e){for(var t=[],a=0;a<e.data.length;a++)t.push(e.data[a]);return t})).catch((function(t){t.response&&(e.message=t.response.data)}))},getGeofences:function(e){return _().get("/api/geofences/").then((function(e){for(var t=[],a=0;a<e.data.length;a++)t.push(e.data[a]);return t})).catch((function(t){t.response&&(e.message=t.response.data)}))},getRadarEvents:function(e){return _().get("/api/events/").then((function(e){for(var t=[],a=0;a<e.data.length;a++)t.push(e.data[a]);return t})).catch((function(t){t.response&&(e.message=t.response.data)}))},getUser:function(e){for(var t=document.cookie.split(";"),a="radar-userId",n=1,r="",s=0;s<t.length;s++){var i=t[s].trim();i.startsWith(a)&&(r=i.split("=")[n])}return _().get("/api/user/"+r).then((function(e){return e.data.user})).catch((function(t){t.response&&(e.message=t.response.data)}))}},k={login:function(e,t,a){_().post("/signin/",{username:t,password:a}).then((function(a){e.$router.replace({name:"Homepage"}),S.initialize(),S.setRadarUser(t),S.trackOnce()})).catch((function(t){t.response&&(e.message=t.response.data)}))}},w={name:"Login",data:function(){return{input:{username:"",password:""}}},methods:{login:function(){var e=this;k.login(e,this.input.username,this.input.password)}}},x=w,O=a("6544"),C=a.n(O),D=a("5bc1"),U=a("8336"),I=a("5d23"),L=a("8b9c"),j=a("2fa4"),V=a("8654"),N=a("71d9"),T=a("2a7f"),E=Object(u["a"])(x,v,m,!1,null,"6dc459ec",null),z=E.exports;C()(E,{VAppBarNavIcon:D["a"],VBtn:U["a"],VListItemTitle:I["a"],VParallax:L["a"],VSpacer:j["a"],VTextField:V["a"],VToolbar:N["a"],VToolbarTitle:T["a"]});var M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-parallax",{attrs:{dark:"",src:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg"}},[a("h1",[e._v("Sign Up!!! ")]),a("form",[a("v-text-field",{attrs:{input:"",type:"text",name:"username",required:"",placeholder:"Enter Username"},model:{value:e.input.username,callback:function(t){e.$set(e.input,"username",t)},expression:"input.username"}}),a("v-text-field",{attrs:{input:"",type:"password",name:"password",placeholder:"Enter Password"},model:{value:e.input.password,callback:function(t){e.$set(e.input,"password",t)},expression:"input.password"}}),a("v-btn",{attrs:{type:"button"},on:{click:function(t){return e.signup()}}},[e._v("Sign Up")])],1)]),a("footer",[a("router-link",{attrs:{to:"/Credits",replace:""}},[e._v("Credits")])],1)],1)},P=[],A={signup:function(e,t,a){_().post("/signup/",{username:t,password:a}).then((function(e){"200"==e.status&&(window.location.href="/Login")})).catch((function(t){t.response&&(e.message=t.response.data)}))}},R={name:"Sign_up",data:function(){return{input:{username:"",password:""}}},methods:{signup:function(){var e=this;A.signup(e,this.input.username,this.input.password)}}},$=R,B=(a("4b8c"),Object(u["a"])($,M,P,!1,null,"7ca34b18",null)),F=B.exports;C()(B,{VBtn:U["a"],VParallax:L["a"],VTextField:V["a"]});var J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{staticClass:"mx-auto overflow-hidden",attrs:{height:"70"}},[a("v-app-bar",{attrs:{color:"deep-purple",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}}),a("v-toolbar-title",[e._v("Study Room Finder")])],1),a("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item",[a("v-list-item-icon",[a("v-icon",[e._v("mdi-home")]),a("router-link",{attrs:{to:"/Login",replace:""}},[a("v-list-item-title",[e._v("Sign Out")])],1)],1)],1)],1)],1)],1),a("div",{staticClass:"map"},[a("Map")],1),a("footer",[a("router-link",{attrs:{to:"/Credits",replace:""}},[a("v-list-item-title",[e._v("Credits")])],1)],1)],1)},G=[],H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",[a("ejs-sidebar",{ref:"sidebar",attrs:{id:"default-sidebar",type:e.type,width:e.width,animate:e.animate,enableRtl:e.enableRtl}},[a("div",{staticClass:"center-align"},[a("form",[a("div",[a("label",{attrs:{for:"Building Space"}},[e._v(":Building Space")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.building,expression:"building"}],attrs:{placeholder:"building"},domProps:{value:e.building},on:{input:function(t){t.target.composing||(e.building=t.target.value)}}})]),a("div",[a("label",{attrs:{for:"Study Space"}},[e._v(":Study Space")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.studySpaceName,expression:"studySpaceName"}],attrs:{placeholder:"studySpaceName"},domProps:{value:e.studySpaceName},on:{input:function(t){t.target.composing||(e.studySpaceName=t.target.value)}}})]),a("div",[a("label",{attrs:{for:"Availability"}},[e._v(":Availability")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.availability,expression:"availability"}],attrs:{placeholder:"Available/Nearly Full/Full"},domProps:{value:e.availability},on:{input:function(t){t.target.composing||(e.availability=t.target.value)}}})])])]),e._l(e.studySpaces,(function(t){return a("ul",{key:t._id},[a("p",{staticClass:"sub-title"},[e._v("Study Space: "+e._s(t.name)+", Building Name: "+e._s(t.buildingName)+", Id: "+e._s(t._id))])])})),a("div",{staticClass:"center-align"},[a("v-btn",{attrs:{type:"button"},on:{click:function(t){return e.report()}}},[e._v("Report")])],1)],2)],1),a("div",[a("h1",[e._v("Map")]),null!=e.userData?a("div",[a("p",[e._v("About "+e._s(e.userData.userId))]),a("ul",{on:{load:function(e){return this.$forceUpdate()}}},[a("li",[e._v("Location: "+e._s(e.sortCoords(e.userData.location.coordinates)))]),a("li",[e._v("Device type: "+e._s(e.userData.deviceType)+" ")]),a("li",[e._v("Agent: "+e._s(e.userData.userAgent))]),a("li",[e._v("Updated at: "+e._s(e.userData.actualUpdatedAt))])])]):e._e(),a("p",[e._v(" Users ")]),e.usersData?a("div",e._l(e.usersData,(function(t){return a("ul",{key:t._id},[a("li",[e._v("User ID: "+e._s(t.userId))]),a("li",[e._v("location: "+e._s(e.sortCoords(t.location.coordinates)))])])})),0):e._e(),a("p",[e._v(" Geofences ")]),e.geofences?a("div",e._l(e.geofences,(function(t){return a("ul",{key:t._id},[a("li",[e._v("Name: "+e._s(t.description))]),a("li",[e._v("ID: "+e._s(t.externalId))])])})),0):e._e(),a("p",[e._v(" Events ")]),e.radarEvents?a("div",e._l(e.radarEvents,(function(t){return a("ul",{key:t._id},[a("li",[e._v(e._s(t.user.userId)+" has entered "+e._s(t.geofence.description)+" at "+e._s(t.createdAt))])])})),0):e._e(),a("l-map",{staticStyle:{height:"850px",width:"1000px"},attrs:{zoom:e.zoom,center:e.center}},[a("l-tile-layer",{attrs:{options:{maxZoom:22},url:e.url,attribution:e.attribution}}),e.userData?a("dir",{staticClass:"current-user-marker"},[a("l-marker",{attrs:{"lat-lng":e.sortCoords(e.userData.location.coordinates)}},[a("l-popup",[e._v(e._s(e.userData.userId))]),a("l-icon",{attrs:{"icon-size":e.dynamicSize,"icon-anchor":e.dynamicAnchor,"icon-url":e.currUserMapIcon}})],1)],1):e._e(),e.usersData&&e.userData?a("div",e._l(e.usersData,(function(t){return a("div",{key:t._id,staticClass:"user-markers"},[t.userId!=e.userData.userId&&0!=t.geofences.length?a("l-marker",{attrs:{"lat-lng":[t.location.coordinates[1],t.location.coordinates[0]]}},[a("l-popup",[e._v(e._s(t.userId))]),a("l-icon",{attrs:{"icon-size":e.dynamicSize,"icon-anchor":e.dynamicAnchor,"icon-url":e.userMapIcon}})],1):e._e()],1)})),0):e._e(),e.geofences?a("div",e._l(e.geofences,(function(t){return a("div",{key:t._id,staticClass:"geofences"},[a("l-polygon",{attrs:{"lat-lngs":e.sortPolyCoords(t.geometry.coordinates)}},[a("l-popup",[e._v(" "+e._s(t.description)+" ("+e._s(t.externalId)+") "),a("ul",[t.metadata.hasWifi?a("li",[e._v("Wifi included")]):e._e()]),a("button",{staticClass:"e-btn e-info",attrs:{"ejs-button":"",id:"toggle"},on:{click:e.toggleClick}},[e._v("Report Study Space")])])],1)],1)})),0):e._e()],1)],1)])},Z=[],W=a("2699"),q=a("a40a"),Y=a("4e2b"),X=a("fbba"),K=a("f60f"),Q=a("258a"),ee=a("e11e"),te=a.n(ee),ae=a("ae8c"),ne={getStudySpaces:function(e){return _().get("/api/studySpaces/").then((function(e){for(var t=[],a=0;a<e.data.length;a++)t.push(e.data[a]);return t})).catch((function(t){t.response&&(e.message=t.response.data)}))},report:function(e,t,a,n){_().post("/api/buildings/"+t+"/studySpaces/"+a+"/availabilityReports/",{studySpaceStatusName:n}).catch((function(t){t.response&&(e.message=t.response.data)}))}};n["a"].use(ae["a"]);var re={name:"Map",components:{LMap:W["a"],LTileLayer:q["a"],LMarker:Y["a"],LIcon:X["a"],LPopup:K["a"],LPolygon:Q["a"]},data:function(){return{animate:!1,enableRtl:!0,width:"280px",type:"Push",zoom:19,center:te.a.latLng(43.7839,-79.1874),icon:te.a.icon({iconUrl:"https://lh3.googleusercontent.com/proxy/ZcYtqlXeuGOHru0UFzvHemclleQK6NVJVYlkEZvTRXrptObMScvVrDwkWr44AeDTE1DdsgrxL8F3",iconAnchor:[64,16]}),url:"https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}@2x?access_token=sk.eyJ1IjoiamZvbmc3MDEiLCJhIjoiY2s3cDExa3lxMDIzNDNrcnNwdjJlbndkZCJ9.n2BIBzqJ9gyJyHjlxnNENw",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',marker:te.a.latLng(43.7839,-79.1874),usersData:null,userData:null,geofences:null,radarEvents:null,trackData:null,userMapIcon:a("8e26"),currUserMapIcon:a("d118"),iconSize:32,studySpaces:null,availability:null,studySpaceName:null,building:null,loadUsersOnce:!0,loadTrackOnce:!0}},computed:{dynamicSize:function(){return[this.iconSize,this.iconSize]},dynamicAnchor:function(){return[this.iconSize/2,this.iconSize]}},created:function(){var e=this,t=setInterval((function(){e.displayUsers()}),12e3),a=setInterval((function(){e.trackOnce()}),8e3);this.usersData=this.loadUsersOnce?this.getUsersOnce():t,this.userData=this.displayUser(),this.geofences=this.displayGeofences(),this.events=this.displayEvents(),this.studySpaces=this.displayStudySpaces(),this.trackData=this.loadTrackOnce?this.getTrackOnce():a},methods:{toggleClick:function(){this.$refs.sidebar.toggle()},report:function(){var e=this;ne.report(e,this.building,this.studySpaceName,this.availability)},displayStudySpaces:function(){var e=this,t=this;ne.getStudySpaces(t).then((function(t){return e.studySpaces=t}))},displayUsers:function(){var e=this,t=this;S.getUsers(t).then((function(t){return e.usersData=t}))},displayUser:function(){var e=this,t=this;S.getUser(t).then((function(t){return e.userData=t}))},displayGeofences:function(){var e=this,t=this;S.getGeofences(t).then((function(t){return e.geofences=t}))},displayEvents:function(){var e=this,t=this;S.getRadarEvents(t).then((function(t){return e.radarEvents=t}))},sortPolyCoords:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push(te.a.GeoJSON.coordsToLatLngs(n))}return t},sortCoords:function(e){return[e[1],e[0]]},trackOnce:function(){return S.trackOnce()},getTrackOnce:function(){this.trackOnce(),this.loadTrackOnce=!1},getUsersOnce:function(){this.displayUsers(),this.loadUsersOnce=!1}}},se=re,ie=(a("d805"),Object(u["a"])(se,H,Z,!1,null,"a5cab5bc",null)),oe=ie.exports;C()(ie,{VBtn:U["a"]});var ue={name:"Homepage",data:function(){return{input:{username:"",password:""},drawer:!1}},components:{Map:oe}},ce=ue,le=(a("3ce1"),a("40dc")),pe=a("b0af"),de=a("132d"),fe=a("8860"),ve=a("da13"),me=a("34c3"),he=a("f774"),ge=Object(u["a"])(ce,J,G,!1,null,"1f4deaf0",null),be=ge.exports;C()(ge,{VAppBar:le["a"],VAppBarNavIcon:D["a"],VCard:pe["a"],VIcon:de["a"],VList:fe["a"],VListItem:ve["a"],VListItemIcon:me["a"],VListItemTitle:I["a"],VNavigationDrawer:he["a"],VToolbarTitle:T["a"]});var _e=a("a41a");n["a"].use(f["a"]);var ye=new f["a"]({routes:[{path:"/",redirect:{name:"Login"}},{path:"/Login",name:"Login",component:z},{path:"/Homepage",name:"Homepage",component:be},{path:"/SignUp",name:"SignUp",component:F},{path:"/Credits",name:"Credits",component:_e["default"]}]});a("6cc5");n["a"].config.productionTip=!1,new n["a"]({vuetify:d,router:ye,render:function(e){return e(l)}}).$mount("#app")},7443:function(e,t){},"8a23":function(e,t,a){},"8e26":function(e,t,a){e.exports=a.p+"img/user_map_icon.91f86cb7.png"},a41a:function(e,t,a){"use strict";var n=a("2822"),r=a("0434"),s=a("2877"),i=Object(s["a"])(r["default"],n["a"],n["b"],!1,null,"61ca8a9d",null);t["default"]=i.exports},b642:function(e,t,a){},d118:function(e,t,a){e.exports=a.p+"img/current_user_map_icon.6431dd46.png"},d805:function(e,t,a){"use strict";var n=a("e52e"),r=a.n(n);r.a},e52e:function(e,t,a){}});
//# sourceMappingURL=app.74f9cbdf.js.map